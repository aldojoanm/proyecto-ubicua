server:
  port: ${AI_SERVICE_PORT:8091}

spring:
  datasource:
    # âœ… Default alineado a tu docker actual: 127.0.0.1:5434 -> container 5432
    # Mantiene override enterprise por env vars (AI_DB_URL o AI_DB_HOST/PORT/NAME).
    url: ${AI_DB_URL:jdbc:postgresql://${AI_DB_HOST:127.0.0.1}:${AI_DB_PORT:5434}/${AI_DB_NAME:ai_service}}
    username: ${AI_DB_USER:postgres}
    password: ${AI_DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: ${AI_DB_CONN_TIMEOUT_MS:5000}
      validation-timeout: ${AI_DB_VALIDATION_TIMEOUT_MS:2000}
      initialization-fail-timeout: ${AI_DB_INIT_FAIL_TIMEOUT_MS:0}
      maximum-pool-size: ${AI_DB_POOL_MAX:5}

  ai:
    model:
      chat: none
      embedding: none
      audio:
        speech: none
        transcription: none
      image: none
      moderation: none

  autoconfigure:
    exclude:
      - org.springframework.ai.vectorstore.pgvector.autoconfigure.PgVectorStoreAutoConfiguration
      - org.springframework.ai.model.openai.autoconfigure.OpenAiAudioSpeechAutoConfiguration

  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${IAM_ISSUER_URI:http://localhost:8080/realms/solveria}

springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
